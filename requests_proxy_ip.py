import requests
from lxml import etree
import random

headers_base = {
'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36',
}

http_ips = [
'111.155.116.196:8123',
'114.113.126.86:80',
'139.224.135.94:80',
'58.252.6.165:9000',
'122.114.31.177:808',
'61.135.217.7:80',
'58.216.202.149:8118',
'222.76.187.238:8118',
'219.149.59.250:9797',
'203.174.112.13:3128',
'119.131.105.71:8118',
'110.72.17.228:8123',
'111.155.116.236:8123',
'139.129.166.68:3128',
'218.241.234.48:8080',
'183.13.182.61:9797',
'60.174.74.40:8118',
'163.125.75.148:9797',
'118.114.77.47:8080',
'180.156.94.129:8118',
]

https_ips = [
'112.250.65.222:53281',
'110.52.8.155:53281',
'114.113.126.82:80',
'114.113.126.87:80',
'121.237.139.35:3128',
'121.226.160.19:808',
'116.226.66.137:9999',
'122.72.18.35:80',
'113.78.65.163:9797',
'139.224.80.139:3128',
'118.212.137.135:31288',
'114.115.140.25:3128',
'119.28.152.208:80',
'211.159.177.212:3128',
'114.215.95.188:3128',
'60.205.125.201:8888',
'14.153.54.43:3128',
'121.43.178.58:3128',
'122.72.18.34:80',
'183.57.36.87:8888',
]

proxy_ip = {
'http':random.choice(http_ips),
'https':random.choice(https_ips)
}
print(proxy_ip)

response = requests.get(url="http://ip.filefab.com/index.php",
                        headers=headers_base,
                        proxies=proxy_ip)
html = etree.HTML(response.text)
ip = html.xpath("//h1[@id='ipd']/span/text()")
print("ip : ", ip)

